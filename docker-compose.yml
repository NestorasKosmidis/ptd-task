services:
  api:
    build:
      context: ./api
    ports:
      - "8080:80"
    volumes:
      - ./api:/var/www/html
      - ./data:/var/www/data
    environment:
      - APP_ENV=dev

  graphhopper:
    image: israelhikingmap/graphhopper:latest
    ports:
      - "8989:8989"
    volumes:
      - ./graphhopper-data:/data
    environment:
      - JAVA_OPTS=-Xmx4g -Xms1g
      - GRAPHOPPER_URL=https://download.geofabrik.de/europe/greece-latest.osm.pbf

  swagger-ui:
    image: swaggerapi/swagger-ui:latest
    ports:
      - "8081:8080"
    volumes:
      - ./openapi.yml:/openapi.yml
    environment:
      - SWAGGER_JSON=/openapi.yml

  ui:
    image: nginx:alpine
    ports:
      - "8082:80"
    volumes:
      - ./ui:/usr/share/nginx/html:ro
